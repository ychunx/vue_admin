(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e360c90e"],{"0f48":function(e,t,s){},"288b":function(e,t,s){"use strict";s("0f48")},"742b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticStyle:{"margin-bottom":"20px"}},[s("CategorySelect",{attrs:{isShowTable:e.isShowTable},on:{getCategoryIds:e.getCategoryIds}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.scene,expression:"scene == 0"}]},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.$store.state.user.buttons.indexOf("btn.Spu.add"),expression:"$store.state.user.buttons.indexOf('btn.Spu.add') != -1"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",disabled:!e.isAbleClick},on:{click:e.addOrUpdateSpu}},[e._v("添加SPU")]),s("el-table",{staticStyle:{margin:"20px 0"},attrs:{border:"",data:e.spuList}},[s("el-table-column",{attrs:{label:"序号",type:"index",width:"80px",align:"center"}}),s("el-table-column",{attrs:{label:"SPU名称",prop:"spuName",width:"300px"}}),s("el-table-column",{attrs:{label:"SPU描述",prop:"description"}}),s("el-table-column",{attrs:{label:"操作",align:"center",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.$store.state.user.buttons.indexOf("btn.Spu.addsku"),expression:"$store.state.user.buttons.indexOf('btn.Spu.addsku') != -1"}],attrs:{type:"success",icon:"el-icon-plus",size:"mini",title:"添加SKU"},on:{click:function(t){return e.addSku(a)}}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.$store.state.user.buttons.indexOf("btn.Spu.update"),expression:"$store.state.user.buttons.indexOf('btn.Spu.update') != -1"}],attrs:{type:"warning",icon:"el-icon-edit",size:"mini",title:"修改SPU"},on:{click:function(t){return e.addOrUpdateSpu(a)}}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.$store.state.user.buttons.indexOf("btn.Spu.skus"),expression:"$store.state.user.buttons.indexOf('btn.Spu.skus') != -1"}],attrs:{type:"info",icon:"el-icon-info",size:"mini",title:"查看SKU列表"},on:{click:function(t){return e.showSkuListDialog(a)}}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!=e.$store.state.user.buttons.indexOf("btn.Spu.delete"),expression:"$store.state.user.buttons.indexOf('btn.Spu.delete') != -1"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"删除SPU"},on:{click:function(t){return e.deleteSpu(a)}}})]}}])})],1),s("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:e.total,"current-page":e.page,"page-size":e.limit,"page-sizes":[3,5,10],layout:"prev,pager,next,jumper,->,sizes,total"},on:{"current-change":e.getSpuList,"size-change":e.handleSizeChange}})],1),s("el-dialog",{attrs:{title:e.spuInfo.spuName+"的Sku列表",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[s("el-table",{attrs:{data:e.skuList,border:""}},[s("el-table-column",{attrs:{label:"名称",prop:"skuName"}}),s("el-table-column",{attrs:{label:"价格",prop:"price",align:"center",width:"130px"}}),s("el-table-column",{attrs:{label:"重量",prop:"weight",align:"center",width:"130px"}}),s("el-table-column",{attrs:{label:"默认图片",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[s("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.skuDefaultImg}})]}}])})],1)],1),s("SpuForm",{directives:[{name:"show",rawName:"v-show",value:1==e.scene,expression:"scene == 1"}],on:{changeScene:e.changeScene}}),s("SkuForm",{directives:[{name:"show",rawName:"v-show",value:2==e.scene,expression:"scene == 2"}],on:{changeScene:e.changeScene}})],1)},r=[],n=s("c7eb"),i=s("1da1"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"SPU名称"}},[s("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入SPU名称"},model:{value:e.spu.spuName,callback:function(t){e.$set(e.spu,"spuName",t)},expression:"spu.spuName"}})],1),s("el-form-item",{attrs:{label:"品牌"}},[s("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:e.spu.tmId,callback:function(t){e.$set(e.spu,"tmId",t)},expression:"spu.tmId"}},e._l(e.tradeMarkList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.tmName,value:e.id}})})),1)],1),s("el-form-item",{attrs:{label:"SPU描述"}},[s("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入SPU描述"},model:{value:e.spu.description,callback:function(t){e.$set(e.spu,"description",t)},expression:"spu.description"}})],1),s("el-form-item",{attrs:{label:"SPU图片"}},[s("el-upload",{attrs:{action:"/dev-api/admin/product/fileUpload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.spuImageList}},[s("i",{staticClass:"el-icon-plus"})]),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],1),s("el-form-item",{attrs:{label:"销售属性"}},[s("el-select",{attrs:{placeholder:"还有"+e.unSelectSaleAttr.length+"项未选择"},model:{value:e.selectingAttr,callback:function(t){e.selectingAttr=t},expression:"selectingAttr"}},e._l(e.unSelectSaleAttr,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id+":"+e.name}})})),1),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus",title:"添加销售属性",size:"small",disabled:!e.selectingAttr},on:{click:e.addSaleAttr}},[e._v("添加")]),s("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",data:e.spu.spuSaleAttrList}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"80px",align:"center"}}),s("el-table-column",{attrs:{prop:"saleAttrName",label:"销售属性名",width:"120px"}}),s("el-table-column",{attrs:{label:"属性值列表",width:"width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,r=t.$index;return[e._l(a.spuSaleAttrValueList,(function(t,n){return s("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!0},on:{close:function(t){return e.handleClose(a,n)}}},[t.flag?s("el-input",{ref:r,refInFor:!0,staticStyle:{width:"100px"},attrs:{size:"mini"},on:{blur:function(s){return e.updateAttrValue(t)}},model:{value:t.saleAttrValueName,callback:function(s){e.$set(t,"saleAttrValueName",s)},expression:"tag.saleAttrValueName"}}):s("span",{on:{click:function(s){return e.clickAttrValue(t,r)}}},[e._v(e._s(t.saleAttrValueName))])],1)})),s("el-input",{ref:r,staticClass:"input-new-tag",staticStyle:{display:"none"},attrs:{size:"small"},on:{blur:function(t){return e.handleInputConfirm(a,r)}},model:{value:e.inputString,callback:function(t){e.inputString=t},expression:"inputString"}})]}}])}),s("el-table-column",{attrs:{label:"操作",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,r=t.$index;return[s("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini",title:"添加属性值"},on:{click:function(t){return e.showValueInput(r)}}},[e._v("添加")]),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"删除属性"},on:{click:function(t){return e.deleteAttr(a,r)}}})]}}])})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.saveSpu}},[e._v("保存")]),s("el-button",{on:{click:function(t){return e.$emit("changeScene",0)}}},[e._v("取消")])],1)],1)],1)},u=[];function o(e){if(Array.isArray(e))return e}s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");function c(e,t){var s=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var a,r,n=[],i=!0,l=!1;try{for(s=s.call(e);!(i=(a=s.next()).done);i=!0)if(n.push(a.value),t&&n.length===t)break}catch(u){l=!0,r=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(l)throw r}}return n}}s("fb6a"),s("b0c0"),s("a630"),s("ac1f"),s("00b4");function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?p(e,t):void 0}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return o(e)||c(e,t)||d(e,t)||m()}s("1276"),s("498a"),s("a434"),s("159b"),s("4de4");var h={name:"SpuForm",data:function(){return{dialogImageUrl:"",dialogVisible:!1,spu:{},tradeMarkList:[],spuImageList:[],baseSaleAttrList:[],selectingAttr:"",inputString:""}},methods:{handleRemove:function(e,t){this.spuImageList=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t,s){this.spuImageList=s},addSaleAttr:function(){var e=this.selectingAttr.split(":"),t=f(e,2),s=t[0],a=t[1];this.spu.spuSaleAttrList||this.$set(this.spu,"spuSaleAttrList",[]),this.spu.spuSaleAttrList.push({baseSaleAttrId:s,saleAttrName:a,spuSaleAttrValueList:[]})},clickAttrValue:function(e,t){var s=this;this.$set(e,"flag",!0),this.$nextTick((function(){s.$refs[t][0].focus()}))},updateAttrValue:function(e){e.flag=!1},showValueInput:function(e){var t=this;this.inputString="",this.$refs[e].$el.style.display="inline-block",this.$nextTick((function(){t.$refs[e].focus()}))},handleInputConfirm:function(e,t){var s=this;if(this.$refs[t].$el.style.display="none",""!=this.inputString.trim()){var a=e.spuSaleAttrValueList.some((function(e){return e.saleAttrValueName==s.inputString}));a?this.$message.error("不能有重复属性值"):e.spuSaleAttrValueList.push({baseSaleAttrId:e.baseSaleAttrId,saleAttrName:e.saleAttrName,spuId:e.spuId,saleAttrValueName:this.inputString})}else this.$message.error("属性值不能为空")},handleClose:function(e,t){e.spuSaleAttrValueList.splice(t,1)},deleteAttr:function(e,t){this.spu.spuSaleAttrList.splice(t,1)},saveSpu:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var s,a,r,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s={},e.spu.id&&(s.id=e.spu.id),e.spu.category3Id?s.category3Id=e.spu.category3Id:s.category3Id=e.category3Id,s.tmId=e.spu.tmId,s.description=e.spu.description,s.spuName=e.spu.spuName,s.spuSaleAttrList=e.spu.spuSaleAttrList,s.id||s.spuSaleAttrList.forEach((function(e){e.spuSaleAttrValueList.forEach((function(e){delete e.id,delete e.spuid,e.isChecked=""}))})),s.spuImageList=[],a=0;a<e.spuImageList.length;a++)r={},e.spuImageList[a].id&&(r.id=e.spuImageList[a].id),e.spu.id&&(r.spuId=e.spu.id),r.imgName=e.spuImageList[a].name,e.spuImageList[a].imgUrl?r.imgUrl=e.spuImageList[a].imgUrl:r.imgUrl=e.spuImageList[a].response?e.spuImageList[a].response.data:e.spuImageList[a].url,s.spuImageList.push(r);return t.next=12,e.$API.spu.reqAddOrUpdateSpu(s);case 12:i=t.sent,200==i.code?e.$message.success("保存SPU成功"):e.$message.error("保存SPU失败"),e.$emit("changeScene",0,!0);case 15:case"end":return t.stop()}}),t)})))()}},computed:{unSelectSaleAttr:function(){var e=this;return this.spu.spuSaleAttrList?this.baseSaleAttrList.filter((function(t){return e.spu.spuSaleAttrList.every((function(e){return t.name!=e.saleAttrName}))})):this.baseSaleAttrList}},mounted:function(){var e=this;this.$bus.$on("addSpuInfo",function(){var t=Object(i["a"])(Object(n["a"])().mark((function t(s){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.spu={},e.tradeMarkList=[],e.spuImageList=[],e.baseSaleAttrList=[],e.category3Id=s,t.next=7,e.$API.spu.reqTradeMarkList();case 7:return a=t.sent,200==a.code?e.tradeMarkList=a.data:e.$message.error("获取品牌数据失败"),t.next=11,e.$API.spu.reqBaseSaleAttrList();case 11:r=t.sent,200==r.code?(e.baseSaleAttrList=r.data,e.$emit("changeScene",1)):e.$message.error("获取基础属性数据失败");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$bus.$on("getSpuInfo",function(){var t=Object(i["a"])(Object(n["a"])().mark((function t(s,a){var r,i,l,u;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.spu={},e.tradeMarkList=[],e.spuImageList=[],e.baseSaleAttrList=[],e.category3Id=a,t.next=7,e.$API.spu.reqSpuInfo(s.id);case 7:return r=t.sent,200==r.code?e.spu=r.data:e.$message.error("获取SPU数据失败"),t.next=11,e.$API.spu.reqTradeMarkList();case 11:return i=t.sent,200==i.code?e.tradeMarkList=i.data:e.$message.error("获取品牌数据失败"),t.next=15,e.$API.spu.reqSpuImageList(s.id);case 15:return l=t.sent,200==l.code?(e.spuImageList=l.data,e.spuImageList.forEach((function(e){e.name=e.imgName,e.url=e.imgUrl})),e.$emit("changeScene",1)):e.$message.error("获取SPU图片数据失败"),t.next=19,e.$API.spu.reqBaseSaleAttrList();case 19:u=t.sent,200==u.code?e.baseSaleAttrList=u.data:e.$message.error("获取基础属性数据失败");case 21:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}())}},g=h,b=(s("288b"),s("2877")),S=Object(b["a"])(g,l,u,!1,null,null,null),I=S.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"SPU名称"}},[e._v(" "+e._s(e.spuInfo.spuName)+" ")]),s("el-form-item",{attrs:{label:"SKU名称"}},[s("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入SKU名称"},model:{value:e.skuInfo.skuName,callback:function(t){e.$set(e.skuInfo,"skuName",t)},expression:"skuInfo.skuName"}})],1),s("el-form-item",{attrs:{label:"价格"}},[s("el-input",{staticStyle:{width:"15%"},attrs:{placeholder:"请输入价格（元）",type:"number"},model:{value:e.skuInfo.price,callback:function(t){e.$set(e.skuInfo,"price",t)},expression:"skuInfo.price"}})],1),s("el-form-item",{attrs:{label:"重量"}},[s("el-input",{staticStyle:{width:"15%"},attrs:{placeholder:"请输入重量（千克）",type:"number"},model:{value:e.skuInfo.weight,callback:function(t){e.$set(e.skuInfo,"weight",t)},expression:"skuInfo.weight"}})],1),s("el-form-item",{attrs:{label:"规格描述"}},[s("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入SKU规格描述",type:"textarea",rows:"4"},model:{value:e.skuInfo.skuDesc,callback:function(t){e.$set(e.skuInfo,"skuDesc",t)},expression:"skuInfo.skuDesc"}})],1),s("el-form-item",{attrs:{label:"平台属性"}},[s("el-form",{attrs:{inline:!0}},e._l(e.attrInfoList,(function(t){return s("el-form-item",{key:t.id,attrs:{label:t.attrName}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.attrInfo,callback:function(s){e.$set(t,"attrInfo",s)},expression:"attr.attrInfo"}},e._l(t.attrValueList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.valueName,value:t.id+":"+e.id}})})),1)],1)})),1)],1),s("el-form-item",{attrs:{label:"销售属性"}},[s("el-form",{attrs:{inline:!0}},e._l(e.spuSaleAttrList,(function(t){return s("el-form-item",{key:t.id,attrs:{label:t.saleAttrName}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.spuSaleAttrInfo,callback:function(s){e.$set(t,"spuSaleAttrInfo",s)},expression:"saleAttr.spuSaleAttrInfo"}},e._l(t.spuSaleAttrValueList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.saleAttrValueName,value:t.id+":"+e.id}})})),1)],1)})),1)],1),s("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"图片列表"}},[s("el-table",{attrs:{border:"",data:e.spuImageList},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{width:"65px",type:"selection",align:"center"}}),s("el-table-column",{attrs:{label:"图片",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[s("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.imgUrl}})]}}])}),s("el-table-column",{attrs:{label:"名称",prop:"imgName"}}),s("el-table-column",{attrs:{label:"操作",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[0==a.isDefault?s("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.selectDefault(a)}}},[e._v("设为默认")]):s("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("默认图片")])]}}])})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.addSku}},[e._v("保存")]),s("el-button",{on:{click:function(t){return e.$emit("changeScene",0)}}},[e._v("取消")])],1)],1)],1)},v=[],w=(s("d81d"),{name:"SkuForm",data:function(){return{spuImageList:[],spuSaleAttrList:[],attrInfoList:[],spuInfo:{},selectedImageList:[],skuInfo:{category3Id:0,spuId:0,tmId:0,skuName:"",price:"",weight:"",skuDesc:"",skuDefaultImg:"",skuImageList:[],skuAttrValueList:[],skuSaleAttrValueList:[]}}},methods:{handleSelectionChange:function(e){this.selectedImageList=e},selectDefault:function(e){var t=this.selectedImageList.some((function(t){return t.imgUrl==e.imgUrl}));t?(this.spuImageList.forEach((function(e){e.isDefault=0})),e.isDefault=1,this.skuInfo.skuDefaultImg=e.imgUrl):this.$message.error("请选择该图片后再将其设为默认图片")},addSku:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.attrInfoList.forEach((function(t){if(t.attrInfo){var s=t.attrInfo.split(":"),a=f(s,2),r=a[0],n=a[1];e.skuInfo.skuAttrValueList.push({attrId:r,valueId:n})}})),e.spuSaleAttrList.forEach((function(t){if(t.spuSaleAttrInfo){var s=t.spuSaleAttrInfo.split(":"),a=f(s,2),r=a[0],n=a[1];e.skuInfo.skuSaleAttrValueList.push({saleAttrId:r,saleAttrValueId:n})}})),e.skuInfo.skuImageList=e.selectedImageList.map((function(e){return{imgName:e.imgName,imgUrl:e.imgUrl,isDefault:e.isDefault,spuImgId:e.id}})),t.next=5,e.$API.spu.reqAddSku(e.skuInfo);case 5:s=t.sent,200==s.code?(e.$emit("changeScene",0),e.$message.success("添加SKU成功")):e.$message.error("添加SKU失败");case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.$bus.$on("getData",function(){var t=Object(i["a"])(Object(n["a"])().mark((function t(s,a){var r,i,l;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skuInfo.skuName="",e.skuInfo.price="",e.skuInfo.weight="",e.skuInfo.skuDesc="",e.spuInfo=s,e.spuImageList=[],e.spuSaleAttrList=[],e.attrInfoList=[],t.next=10,e.$API.spu.reqAttrInfoList(a);case 10:return r=t.sent,200==r.code?e.attrInfoList=r.data:e.$message.error("获取平台属性数据失败"),t.next=14,e.$API.spu.reqSpuSaleAttrList(s.id);case 14:return i=t.sent,200==i.code?e.spuSaleAttrList=i.data:e.$message.error("获取销售属性数据失败"),t.next=18,e.$API.spu.reqSpuImageList(s.id);case 18:l=t.sent,200==l.code?(e.spuImageList=l.data,e.spuImageList.forEach((function(t){e.$set(t,"isDefault",0)})),e.$emit("changeScene",2)):e.$message.error("获取SPU图片数据失败"),e.skuInfo.category3Id=s.category3Id,e.skuInfo.spuId=s.id,e.skuInfo.tmId=s.tmId;case 23:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}())}}),y=w,A=Object(b["a"])(y,k,v,!1,null,null,null),L=A.exports,x={name:"Spu",components:{SpuForm:I,SkuForm:L},data:function(){return{categoryIds:{},isAbleClick:!1,isShowTable:!0,page:1,limit:3,total:1,spuList:[],scene:0,dialogTableVisible:!1,spuInfo:{},skuList:[]}},methods:{handleSizeChange:function(e){this.limit=e,this.getSpuList()},getCategoryIds:function(e){this.categoryIds=e,e.category3Id?(this.isAbleClick=!0,this.getSpuList()):this.isAbleClick=!1},getSpuList:function(){var e=arguments,t=this;return Object(i["a"])(Object(n["a"])().mark((function s(){var a,r,i,l,u;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,t.page=a,r=t.categoryIds.category3Id,i=t.page,l=t.limit,s.next=6,t.$API.spu.reqSpuList(i,l,r);case 6:u=s.sent,200==u.code?(t.spuList=u.data.records,t.total=u.data.total):t.$message.error("获取SPU列表失败");case 8:case"end":return s.stop()}}),s)})))()},addOrUpdateSpu:function(e){this.isShowTable=!1,e.id?this.$bus.$emit("getSpuInfo",e,this.categoryIds.category3Id):this.$bus.$emit("addSpuInfo",this.categoryIds.category3Id)},addSku:function(e){this.isShowTable=!1,this.$bus.$emit("getData",e,this.categoryIds)},deleteSpu:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function s(){var a;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$API.spu.reqDeleteSpu(e.id);case 2:a=s.sent,200==a.code?(t.getSpuList(t.spuList.length>1?t.page:t.page-1),t.$message.success("删除SPU成功")):t.$message.error("删除SPU失败");case 4:case"end":return s.stop()}}),s)})))()},changeScene:function(e,t){this.scene=e,t&&this.getSpuList(this.page),0==e&&(this.isShowTable=!0)},showSkuListDialog:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function s(){var a;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$API.spu.reqSkuList(e.id);case 2:a=s.sent,200==a.code?(t.spuInfo=e,t.skuList=a.data,t.dialogTableVisible=!0):t.$message.error("获取Sku列表数据失败");case 4:case"end":return s.stop()}}),s)})))()}}},$=x,U=Object(b["a"])($,a,r,!1,null,null,null);t["default"]=U.exports},a434:function(e,t,s){"use strict";var a=s("23e7"),r=s("23cb"),n=s("a691"),i=s("50c4"),l=s("7b0b"),u=s("65f0"),o=s("8418"),c=s("1dde"),p=s("ae40"),d=c("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var s,a,c,p,d,m,S=l(this),I=i(S.length),k=r(e,I),v=arguments.length;if(0===v?s=a=0:1===v?(s=0,a=I-k):(s=v-2,a=h(f(n(t),0),I-k)),I+s-a>g)throw TypeError(b);for(c=u(S,a),p=0;p<a;p++)d=k+p,d in S&&o(c,p,S[d]);if(c.length=a,s<a){for(p=k;p<I-a;p++)d=p+a,m=p+s,d in S?S[m]=S[d]:delete S[m];for(p=I;p>I-a+s;p--)delete S[p-1]}else if(s>a)for(p=I-a;p>k;p--)d=p+a-1,m=p+s-1,d in S?S[m]=S[d]:delete S[m];for(p=0;p<s;p++)S[p+k]=arguments[p+2];return S.length=I-a+s,c}})}}]);